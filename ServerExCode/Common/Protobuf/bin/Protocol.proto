syntax = "proto3";
package Protocol;

import "Enum.proto";
import "Struct.proto";

message C_LOGIN
{
	uint64 loginCode= 1;
	string test = 2;
}

message C_MOVE 
{
	int32 roomCode = 1;
	repeated uint32 objectId = 2;
	Vector3 position = 3;
}

message C_ROOM_CREATE
{
	uint64 gameId = 1;
	string gameName = 2;
	string gamePassWord = 3;
	bytes mapHash = 4;
}

// Room Data Request
message C_ROOM_DATA
{
	uint32 dummy = 1;
}

// Room Access Request
message C_ROOM_REQUEST
{
	int32 roomCode = 1;
	string gamePassWord = 2;
}

message C_ROOM_PLAYER_LIST_REQUEST
{
	int32 roomCode = 1;
}

message C_START_GAME
{
	int32 roomCode = 1;
}

// client 정보는 GameSession에 있음
message C_EXIT_GAME
{
	uint32 dummy = 1;
}


message C_ATTACK
{
	int32 roomCode = 1;
	uint32 objectId = 2;
	ObjectType objectType = 3;
	Vector3 direction = 4;

}

message C_RTT_PING
{
	int64 client_time = 1;
}

message S_RTT_PONG
{
	int64 client_time = 1;
	int64 server_time = 2;
}

message S_LOGIN
{
	uint64 gameId = 1;
	bool loginAccept = 2;
}

message S_ROOM_LOBBY
{
	uint64 hostId = 1;
	string gameName = 2;
	string gamePassWord = 3;
	int32 roomCode = 4;
	bytes mapHash = 5;
}

message S_LOBBY_PLAYER_INFO
{
	repeated PlayerInfo playerData = 1;
}

message S_GAME_START
{
	Vector3 startPos = 1;
	repeated ObjectData objectData = 2;
	int32 playerId = 3;
}

message S_ROOM_EXIT
{
	DisconnectCode diconnectCode = 1;
}

// Room Data Response
message S_ROOM_DATA
{
	repeated RoomData roomData = 1;
}

// Room Accept & Ingame Objects Data
message S_ROOM_RESPONSE
{
	bool roomAccept = 1;
	int32 roomCode = 2;
	// uint32 playerObjectId = 3;
	// Ingame Objects Data
	// repeated ObjectData objectData = 4;
}

message S_MOVE
{
	uint32 objectId = 1;
	GameObjectState state = 2;
	Vector3 position = 3;
}

message S_OBJECT_SPAWN
{
	ObjectData objectData = 1;
	int64 spawnTime = 2;
}

message S_OBJECT_DEAD
{
	uint32 objectId = 1;
	GameObjectState state = 2;
}

message S_OBJECT_DAMAGE
{
	uint32 objectId = 1;
	float hp = 2;
}

message S_TEST
{
	bytes test = 1;
}